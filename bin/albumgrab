#!/usr/bin/env php
<?php

require __DIR__.'/vendor/autoload.php';

use Albumgrab\AlbumgrabApplication;
use Albumgrab\DependencyInjection\CrawlerExtension as ContainerExtension;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;

$application = new AlbumgrabApplication();

if ($application instanceof ContainerAwareInterface) {
    $container = new ContainerBuilder();

    $extension = new ContainerExtension();
    $container->registerExtension($extension);
    $container->loadFromExtension($extension->getAlias());

    $container->setParameter('root_dir', __DIR__);

    $container->compile();

    $application->setContainer($container);
}

$application->run();
